{"version":3,"sources":["../../src/utils/helper.ts","../../src/utils/config.ts","../../src/class/invoice.ts"],"names":["require_helper","__commonJSMin","exports","module","helper","item","price","quantity","items","total","tax","subTotal","require_config","defaultConfig","fs","path","invoiceMaker","PDFInvoice","payload","config","printer","docDefinition","resolve","reject","doc","stream","err","font","additionalFonts","defaults","style","sections","sectionCompany","refLabel","dateLabel","statusLabel","sectionCustomer","sectionItems","totalPrice","sectionTotal","sectionQR","sectionNote"],"mappings":"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","sourcesContent":["import type { ItemInfo } from \"../../global\";\r\n\r\ninterface Helpers {\r\n\tcalcItemTotal(item: ItemInfo): number | string;\r\n\tcalcTax(items: ItemInfo[]): number | string;\r\n\tcalcFinalTotal(items: ItemInfo[]): number | string;\r\n}\r\n\r\nconst helper: Helpers = {\r\n\t/**\r\n\t * Item total price calculation.\r\n\t *\r\n\t * @param {Object} item.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcItemTotal: function (item: ItemInfo): string {\r\n\t\tconst price = item.price || 0;\r\n\t\tconst quantity = item.quantity || 1;\r\n\t\treturn (price * quantity).toFixed(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate subtotal.\r\n\t *\r\n\t * @param {Object} items.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcSubTotal: function (items: ItemInfo[]): number | string {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tlet total = 0;\r\n\r\n\t\titems.forEach((item) => {\r\n\t\t\ttotal += Number(this.calcItemTotal(item));\r\n\t\t});\r\n\r\n\t\treturn total.toFixed(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate tax.\r\n\t *\r\n\t * @param {Object} items.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcTax: function (items: ItemInfo[]): number | string {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tlet total = 0;\r\n\r\n\t\titems.forEach((item) => {\r\n\t\t\tconst price = item.price;\r\n\t\t\tconst quantity = item.quantity;\r\n\t\t\tconst tax = item.tax || 0;\r\n\r\n\t\t\ttotal += (price * quantity * tax) / 100;\r\n\t\t});\r\n\r\n\t\treturn total.toFixed(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate total final price.\r\n\t *\r\n\t * @param {Object} items.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcFinalTotal: function (items: ItemInfo[]): number | string {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tconst subTotal = Number(this.calcSubTotal(items));\r\n\t\tconst tax = Number(this.calcTax(items));\r\n\t\tconst deliveryFee = Number(this.invoice.deliveryFee));\r\n\r\n\t\treturn (subTotal + tax + deliveryFee).toFixed(2);\r\n\t},\r\n};\r\n\r\nmodule.exports = helper;\r\n","/**\r\n * Holds the default configuration.\r\n *\r\n * @returns {Object} config.\r\n * @since 1.0.7\r\n */\r\nconst defaultConfig = {\r\n\tstring: {\r\n\t\tinvoice: \"I N V O I C E\",\r\n\t\trefNumber: \"Ref no\",\r\n\t\tdate: \"Date\",\r\n\t\tstatus: \"Status\",\r\n\t\tbillTo: \"Bill To\",\r\n\t\titem: \"Item\",\r\n\t\tquantity: \"Qty\",\r\n\t\tprice: \"Price\",\r\n\t\ttax: \"Tax\",\r\n\t\ttotal: \"Total\",\r\n\t\tsubTotal: \"Subtotal\",\r\n\t\tdeliveryFee: \"Deliveryfee\",\r\n\t\ttotalTax: \"Total Tax\",\r\n\t},\r\n};\r\n\r\nmodule.exports = defaultConfig;\r\n","const fs = require(\"fs\");\nconst path = require(\"path\");\nconst invoiceMaker = require(\"pdfmake\");\nconst helper = require(\"@/utils/helper\");\nconst defaultConfig = require(\"@/utils/config\");\n\nimport type {\n\tCompanyInfo,\n\tCustomerInfo,\n\tInvoiceInfo,\n\tItemInfo,\n\tQRInfo,\n\tNotes,\n\tInvoicePayLoad,\n\tConfiguration,\n} from \"../../global\";\n\nexport class PDFInvoice {\n\tpayload: InvoicePayLoad;\n\tcompany: CompanyInfo;\n\tinvoice: InvoiceInfo;\n\tcustomer: CustomerInfo;\n\titems: ItemInfo[];\n\tcurrency: string;\n\tpath: string;\n\tqr: QRInfo;\n\tnote: Notes;\n\tdate: string;\n\tconfig: Configuration;\n\tconstructor(payload: InvoicePayLoad, config: Configuration = defaultConfig) {\n\t\tthis.payload = payload;\n\n\t\t/**\n\t\t * Content section.\n\t\t */\n\t\tthis.company = payload.company;\n\t\tthis.customer = payload.customer;\n\t\tthis.invoice = payload.invoice;\n\t\tthis.items = payload.items;\n\t\tthis.qr = payload.qr;\n\t\tthis.note = payload.note;\n\n\t\t/**\n\t\t * Currency.\n\t\t */\n\t\tthis.currency = this.invoice.currency || \"$\";\n\n\t\t/**\n\t\t * Invoice path.\n\t\t */\n\t\tthis.path = path.resolve(this.invoice.path) || \"./invoice.pdf\";\n\n\t\t/**\n\t\t * Invoice date.\n\t\t */\n\t\tthis.date = new Date().toLocaleDateString(\"en-US\", {\n\t\t\tyear: \"numeric\",\n\t\t\tmonth: \"numeric\",\n\t\t\tday: \"numeric\",\n\t\t});\n\n\t\t/**\n\t\t * Configuration.\n\t\t */\n\t\tthis.config = config;\n\t}\n\n\t/**\n\t * Create a PDF invoice.\n\t *\n\t * @returns {void}\n\t * @since 1.0.0\n\t */\n\tasync create(): Promise<string> {\n\t\tconst printer = new invoiceMaker(this.fonts());\n\n\t\tconst docDefinition = {\n\t\t\tpageSize: \"A4\",\n\t\t\torientation: \"portrait\",\n\t\t\tpageMargins: [40, 40, 40, 40],\n\t\t\tinfo: this.docMeta(),\n\t\t\tcontent: this.content(),\n\t\t\tdefaultStyle: this.docStyle(),\n\t\t\tstyles: this.docTypo(),\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst doc = printer.createPdfKitDocument(docDefinition);\n\t\t\tconst stream = fs.createWriteStream(this.path);\n\n\t\t\tdoc.pipe(stream);\n\n\t\t\tdoc.on(\"end\", () => resolve(this.path));\n\n\t\t\tdoc.on(\"error\", (err: any) => reject(err));\n\n\t\t\tdoc.end();\n\t\t});\n\t}\n\n\t/**\n\t * Collection of available fonts.\n\t *\n\t * @returns {Record<string, Record<string, string>>} font.\n\t * @since 1.0.0\n\t */\n\tfonts(): Record<string, Record<string, string>> {\n\t\tconst font = {\n\t\t\tHelvetica: {\n\t\t\t\tnormal: \"Helvetica\",\n\t\t\t\tbold: \"Helvetica-Bold\",\n\t\t\t\titalics: \"Helvetica-Oblique\",\n\t\t\t\tbolditalics: \"Helvetica-BoldOblique\",\n\t\t\t},\n\t\t\tTimes: {\n\t\t\t\tnormal: \"Times-Roman\",\n\t\t\t\tbold: \"Times-Bold\",\n\t\t\t\titalics: \"Times-Italic\",\n\t\t\t\tbolditalics: \"Times-BoldItalic\",\n\t\t\t},\n\t\t\tCourier: {\n\t\t\t\tnormal: \"Courier\",\n\t\t\t\tbold: \"Courier-Bold\",\n\t\t\t\titalics: \"Courier-Oblique\",\n\t\t\t\tbolditalics: \"Courier-BoldOblique\",\n\t\t\t},\n\t\t};\n\n\t\tconst additionalFonts = this.config?.font || null;\n\n\t\tif (additionalFonts && Object.keys(additionalFonts).length > 0) {\n\t\t\tObject.assign(font, additionalFonts);\n\t\t}\n\n\t\treturn font;\n\t}\n\n\t/**\n\t * Doc meta.\n\t *\n\t * @returns {Record<string, string | undefined>}\n\t * @since 1.0.0\n\t */\n\tdocMeta(): Record<string, string | undefined> {\n\t\tconst meta = {\n\t\t\ttitle: \"Invoice - #\" + this.invoice.number,\n\t\t\tauthor: this.company.name,\n\t\t\tsubject: \"Invoice - \" + this.customer.name,\n\t\t\tkeywords: \"invoice\",\n\t\t};\n\n\t\treturn meta;\n\t}\n\n\t/**\n\t * Default invoice styles.\n\t *\n\t * @returns {Record<string, any>}\n\t * @since 1.0.0\n\t */\n\tdocStyle(): Record<string, any> {\n\t\tlet defaults = {\n\t\t\tfont: \"Helvetica\",\n\t\t\tfontSize: this.config?.style?.fontSize || 10,\n\t\t\tlineHeight: 1.8,\n\t\t\tbold: false,\n\t\t\tcolor: \"#000000\",\n\t\t\tcolumnGap: 30,\n\t\t};\n\n\t\tconst style = this.config.style || null;\n\n\t\tif (style && Object.keys(style).length > 0) {\n\t\t\tdefaults = { ...defaults, ...style };\n\t\t}\n\n\t\treturn defaults;\n\t}\n\n\t/**\n\t * Invoice typography styles.\n\t *\n\t * @returns {Object} defaults.\n\t * @since 1.0.0\n\t */\n\tdocTypo(): Record<string, Record<string, unknown>> {\n\t\treturn {\n\t\t\th1: {\n\t\t\t\tfontSize: 18,\n\t\t\t\tbold: true,\n\t\t\t},\n\t\t\th2: {\n\t\t\t\tfontSize: 16,\n\t\t\t\tbold: true,\n\t\t\t},\n\t\t\th3: {\n\t\t\t\tfontSize: 14,\n\t\t\t\tbold: true,\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tfontSize: this.config?.style?.fontSize || 10,\n\t\t\t\tbold: false,\n\t\t\t},\n\t\t\ttextBold: {\n\t\t\t\tfontSize: this.config?.style?.fontSize || 10,\n\t\t\t\tbold: true,\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Return the invoice layout.\n\t *\n\t * @returns {Object} layout.\n\t * @since 1.0.0\n\t */\n\tcontent(): any {\n\t\tconst sections = [];\n\n\t\t/**\n\t\t * Left: Company section.\n\t\t * Right: Invoice section.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\tconst sectionCompany = {\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\twidth: \"70%\",\n\t\t\t\t\tstack: [] as any,\n\t\t\t\t\tstyle: \"text\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\twidth: \"30%\",\n\t\t\t\t\tstack: [] as any,\n\t\t\t\t\tstyle: \"text\",\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tif (this.company.logo) {\n\t\t\tif (!this.company.logo.startsWith(\"<svg\")) {\n\t\t\t\tthrow new Error(\"Only SVG logo are supported.\");\n\t\t\t}\n\n\t\t\tsectionCompany.columns[0].stack.unshift({\n\t\t\t\tsvg: this.company.logo,\n\t\t\t\tmargin: [0, 0, 0, 20],\n\t\t\t});\n\n\t\t\tsectionCompany.columns[0].stack.push({\n\t\t\t\ttext: this.company.name,\n\t\t\t\tstyle: \"h3\",\n\t\t\t});\n\t\t} else {\n\t\t\tsectionCompany.columns[0].stack.unshift({\n\t\t\t\ttext: this.company.name,\n\t\t\t\tstyle: \"h1\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.company.address) {\n\t\t\tsectionCompany.columns[0].stack.push({\n\t\t\t\ttext: this.company.address,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.company.phone) {\n\t\t\tsectionCompany.columns[0].stack.push({\n\t\t\t\ttext: this.company.phone,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.company.email) {\n\t\t\tsectionCompany.columns[0].stack.push({\n\t\t\t\ttext: this.company.email,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.company.website) {\n\t\t\tsectionCompany.columns[0].stack.push({\n\t\t\t\ttext: this.company.website,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.company.taxId) {\n\t\t\tsectionCompany.columns[0].stack.push({\n\t\t\t\ttext: this.company.taxId,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\t// Invoice information.\n\t\tif (this.invoice.label) {\n\t\t\tsectionCompany.columns[1].stack.unshift({\n\t\t\t\ttext: this.invoice.label,\n\t\t\t\tstyle: \"h1\",\n\t\t\t});\n\t\t} else {\n\t\t\tsectionCompany.columns[1].stack.unshift({\n\t\t\t\ttext: this.config.string.invoice || \"I N V O I C E\",\n\t\t\t\tstyle: \"h1\",\n\t\t\t});\n\t\t}\n\n\t\tconst refLabel = this.config.string.refNumber || \"Ref no:\";\n\n\t\tsectionCompany.columns[1].stack.push({\n\t\t\ttext: refLabel + \": #\" + (this.invoice.number || 1),\n\t\t\tstyle: \"textBold\",\n\t\t});\n\n\t\tconst dateLabel = this.config.string.date;\n\n\t\tsectionCompany.columns[1].stack.push({\n\t\t\ttext: dateLabel + \": \" + (this.invoice.date || this.date),\n\t\t\tstyle: \"text\",\n\t\t});\n\n\t\tconst deliveryDateLabel = this.config.string.deliveryDate;\n\n\t\tsectionCompany.columns[1].stack.push({\n\t\t\ttext: deliveryDateLabel + \": \" + (this.invoice.deliveryDate || this.date),\n\t\t\tstyle: \"text\",\n\t\t});\n\n\t\tconst statusLabel = this.config.string.status;\n\n\t\tsectionCompany.columns[1].stack.push({\n\t\t\ttext: statusLabel + \": \" + (this.invoice.status || \"Pending!\"),\n\t\t\tstyle: \"textBold\",\n\t\t});\n\n\t\tsections.push(sectionCompany);\n\n\t\t/**\n\t\t * Left: Bill to section.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\tconst sectionCustomer = {\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\twidth: 300,\n\t\t\t\t\tmargin: [0, 30, 0, 0],\n\t\t\t\t\tstack: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: this.config.string.billTo,\n\t\t\t\t\t\t\tstyle: \"h2\",\n\t\t\t\t\t\t},\n\t\t\t\t\t] as any,\n\t\t\t\t\tstyle: \"text\",\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tif (this.customer.name) {\n\t\t\tsectionCustomer.columns[0].stack.push({\n\t\t\t\ttext: this.customer.name,\n\t\t\t\tstyle: \"textBold\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.customer.company) {\n\t\t\tsectionCustomer.columns[0].stack.push({\n\t\t\t\ttext: this.customer.company,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.customer.address) {\n\t\t\tsectionCustomer.columns[0].stack.push({\n\t\t\t\ttext: this.customer.address,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.customer.phone) {\n\t\t\tsectionCustomer.columns[0].stack.push({\n\t\t\t\ttext: this.customer.phone,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.customer.email) {\n\t\t\tsectionCustomer.columns[0].stack.push({\n\t\t\t\ttext: this.customer.email,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tif (this.customer.taxId) {\n\t\t\tsectionCustomer.columns[0].stack.push({\n\t\t\t\ttext: this.customer.taxId,\n\t\t\t\tstyle: \"text\",\n\t\t\t});\n\t\t}\n\n\t\tsections.push(sectionCustomer);\n\n\t\t/**\n\t\t * Full: Items section.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\tconst sectionItems = {\n\t\t\tmargin: [0, 30, 0, 0],\n\t\t\tlineHeight: 1.5,\n\t\t\ttable: {\n\t\t\t\twidths: [200, 50, \"*\", 50, \"*\"],\n\t\t\t\theaderRows: 1,\n\t\t\t\tlineHeight: 1.5,\n\t\t\t\tbody: [\n\t\t\t\t\t[\n\t\t\t\t\t\t`\\n ${this.config.string.item}`,\n\t\t\t\t\t\t`\\n ${this.config.string.quantity}`,\n\t\t\t\t\t\t`\\n ${this.config.string.price}`,\n\t\t\t\t\t\t`\\n ${this.config.string.tax}`,\n\t\t\t\t\t\t`\\n ${this.config.string.total}`,\n\t\t\t\t\t],\n\t\t\t\t] as any,\n\t\t\t},\n\t\t};\n\n\t\tif (this.items.length > 0) {\n\t\t\tthis.items.forEach((item) => {\n\t\t\t\tconst totalPrice = helper.calcItemTotal(item);\n\n\t\t\t\tsectionItems.table.body.push([\n\t\t\t\t\t`\\n ${item.name}`,\n\t\t\t\t\t`\\n ${item.quantity}`,\n\t\t\t\t\t`\\n ${this.currency}${item.price}`,\n\t\t\t\t\t`\\n ${item.tax || 0}%`,\n\t\t\t\t\t`\\n ${this.currency}${totalPrice}`,\n\t\t\t\t]);\n\t\t\t});\n\t\t}\n\n\t\tsections.push(sectionItems);\n\n\t\t/**\n\t\t * Right: Total section.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\tconst sectionTotal = {\n\t\t\tmargin: [0, 20, 0, 0],\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\twidth: \"*\",\n\t\t\t\t\tstack: [\" \"],\n\t\t\t\t\tstyle: \"text\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\twidth: 200,\n\t\t\t\t\tlineHeight: 1.5,\n\t\t\t\t\tstyle: \"textBold\",\n\t\t\t\t\ttable: {\n\t\t\t\t\t\twidths: [80, \"*\"],\n\t\t\t\t\t\theaderRows: 1,\n\t\t\t\t\t\tlineHeight: 1.5,\n\t\t\t\t\t\tbody: [\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t`\\n ${this.config.string.subTotal}`,\n\t\t\t\t\t\t\t\t`\\n ${this.currency}${helper.calcSubTotal(this.items)}`,\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t`\\n ${this.config.string.totalTax}`,\n\t\t\t\t\t\t\t\t`\\n ${this.currency}${helper.calcTax(this.items)}`,\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t`\\n ${this.config.string.total}`,\n\t\t\t\t\t\t\t\t`\\n ${this.currency}${helper.calcFinalTotal(this.items)}`,\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tsections.push(sectionTotal);\n\n\t\t/**\n\t\t * Left: QR section.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\tif (this.payload.qr) {\n\t\t\tconst sectionQR = {\n\t\t\t\tmargin: [0, 50, 0, 0],\n\t\t\t\tqr: this.payload.qr.data,\n\t\t\t\tfit: this.payload.qr.width || \"50\",\n\t\t\t};\n\n\t\t\tsections.push(sectionQR);\n\t\t}\n\n\t\t/**\n\t\t * Left: Notes section.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\tif (this.payload.note) {\n\t\t\tconst sectionNote = {\n\t\t\t\tmargin: [0, this.payload.qr ? 20 : 50, 0, 0],\n\t\t\t\ttext: this.payload.note,\n\t\t\t\titalics: true,\n\t\t\t};\n\n\t\t\tsections.push(sectionNote);\n\t\t}\n\n\t\t/**\n\t\t * Return the invoice sections.\n\t\t *\n\t\t * @since 1.0.0\n\t\t */\n\t\treturn sections;\n\t}\n}\n"]}