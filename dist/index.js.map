{"version":3,"sources":["../src/utils/helper.ts","../src/utils/config.ts","../src/class/invoice.ts"],"names":["require_helper","__commonJSMin","exports","module","helper","item","price","quantity","items","total","tax","subTotal","require_config","defaultConfig","fs","path","invoiceMaker","PDFInvoice","payload","config","printer","docDefinition","resolve","reject","doc","stream","err","sections","sectionCompany","refLabel","dateLabel","dueDateLabel","statusLabel","sectionCustomer","sectionItems","totalPrice","sectionTotal","sectionQR","sectionNote"],"mappings":"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","sourcesContent":["import type { ItemInfo } from \"../../global\";\r\n\r\ninterface Helpers {\r\n\tcalcItemTotal(item: ItemInfo): number | string;\r\n\tcalcTax(items: ItemInfo[]): number | string;\r\n\tcalcSubTotal(items: ItemInfo[]): number | string;\r\n\tcalcFinalTotal(items: ItemInfo[]): number | string;\r\n}\r\n\r\nconst helper: Helpers = {\r\n\t/**\r\n\t * Item total price calculation.\r\n\t *\r\n\t * @param {Object} item.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcItemTotal: function (item: ItemInfo): string {\r\n\t\tconst price = item.price || 0;\r\n\t\tconst quantity = item.quantity || 1;\r\n\t\treturn (price * quantity).toFixed(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate subtotal.\r\n\t *\r\n\t * @param {Object} items.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcSubTotal: function (items: ItemInfo[]): number | string {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tlet total = 0;\r\n\r\n\t\titems.forEach((item) => {\r\n\t\t\ttotal += Number(this.calcItemTotal(item));\r\n\t\t});\r\n\r\n\t\treturn total.toFixed(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate tax.\r\n\t *\r\n\t * @param {Object} items.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcTax: function (items: ItemInfo[]): number | string {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tlet total = 0;\r\n\r\n\t\titems.forEach((item) => {\r\n\t\t\tconst price = item.price;\r\n\t\t\tconst quantity = item.quantity;\r\n\t\t\tconst tax = item.tax || 0;\r\n\r\n\t\t\ttotal += (price * quantity * tax) / 100;\r\n\t\t});\r\n\r\n\t\treturn total.toFixed(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Calculate total final price.\r\n\t *\r\n\t * @param {Object} items.\r\n\t * @returns {number} total.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcalcFinalTotal: function (items: ItemInfo[]): number | string {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tconst subTotal = Number(this.calcSubTotal(items));\r\n\t\tconst tax = Number(this.calcTax(items));\r\n\r\n\t\treturn (subTotal + tax).toFixed(2);\r\n\t},\r\n};\r\n\r\nmodule.exports = helper;\r\n","/**\r\n * Holds the default configuration.\r\n *\r\n * @returns {Object} config.\r\n * @since 1.0.7\r\n */\r\nconst defaultConfig = {\r\n\tstring: {\r\n\t\tinvoice: \"I N V O I C E\",\r\n\t\trefNumber: \"Ref no: #\",\r\n\t\tdate: \"Date:\",\r\n\t\tdueDate: \"Due Date:\",\r\n\t\tstatus: \"Status:\",\r\n\t\tbillTo: \"Bill To\",\r\n\t\titem: \"Item\",\r\n\t\tquantity: \"Qty\",\r\n\t\tprice: \"Price\",\r\n\t\ttax: \"Tax\",\r\n\t\ttotal: \"Total\",\r\n\t\tsubTotal: \"Subtotal\",\r\n\t\ttotalTax: \"Total Tax\",\r\n\t},\r\n\tfont: {\r\n\t\thelvetica: {\r\n\t\t\tnormal: \"Helvetica\",\r\n\t\t\tbold: \"Helvetica-Bold\",\r\n\t\t\titalics: \"Helvetica-Oblique\",\r\n\t\t\tbolditalics: \"Helvetica-BoldOblique\",\r\n\t\t},\r\n        noto: {\r\n            \r\n        }\r\n\t},\r\n};\r\n\r\nmodule.exports = defaultConfig;\r\n","const fs = require(\"fs\");\r\nconst path = require(\"path\");\r\nconst invoiceMaker = require(\"pdfmake\");\r\nconst helper = require(\"../utils/helper\");\r\nconst defaultConfig = require(\"../utils/config\");\r\n\r\nimport type {\r\n\tCompanyInfo,\r\n\tCustomerInfo,\r\n\tInvoiceInfo,\r\n\tItemInfo,\r\n\tQRInfo,\r\n\tNotes,\r\n\tInvoicePayLoad,\r\n\tSimplePDFInvoice,\r\n\tConfiguration,\r\n} from \"../../global\";\r\n\r\nexport class PDFInvoice implements SimplePDFInvoice {\r\n\tpayload: InvoicePayLoad;\r\n\tcompany: CompanyInfo;\r\n\tinvoice: InvoiceInfo;\r\n\tcustomer: CustomerInfo;\r\n\titems: ItemInfo[];\r\n\tcurrency: string;\r\n\tpath: string;\r\n\tqr: QRInfo;\r\n\tnote: Notes;\r\n\tdate: string;\r\n\tconfig: Configuration;\r\n\tconstructor(\r\n\t\tpayload: InvoicePayLoad,\r\n\t\tconfig: Configuration = defaultConfig\r\n\t) {\r\n\t\tthis.payload = payload;\r\n\r\n\t\t// Invoice content section.\r\n\t\tthis.company = payload.company;\r\n\t\tthis.customer = payload.customer;\r\n\t\tthis.invoice = payload.invoice;\r\n\t\tthis.items = payload.items;\r\n\t\tthis.qr = payload.qr;\r\n\t\tthis.note = payload.note;\r\n\r\n\t\t// Invoice currency.\r\n\t\tthis.currency = this.invoice.currency || \"$\";\r\n\r\n\t\t// Path.\r\n\t\tthis.path = path.resolve(this.invoice.path) || \"./invoice.pdf\";\r\n\r\n\t\t// Invoice information.\r\n\t\tthis.date = new Date().toLocaleDateString(\"en-US\", {\r\n\t\t\tyear: \"numeric\",\r\n\t\t\tmonth: \"numeric\",\r\n\t\t\tday: \"numeric\",\r\n\t\t});\r\n\r\n\t\t// Configuration.\r\n\t\tthis.config = config;\r\n\t}\r\n\r\n\t/**\r\n\t * Create a PDF invoice.\r\n\t *\r\n\t * @returns {void}\r\n\t * @since 1.0.0\r\n\t */\r\n\tasync create(): Promise<string> {\r\n\t\tconst printer = new invoiceMaker(this.fonts());\r\n\r\n\t\tconst docDefinition = {\r\n\t\t\tpageSize: \"A4\",\r\n\t\t\torientation: \"portrait\",\r\n\t\t\tpageMargins: [40, 40, 40, 40],\r\n\t\t\tinfo: this.meta(),\r\n\t\t\tcontent: this.content(),\r\n\t\t\tdefaultStyle: this.defaultStyle(),\r\n\t\t\tstyles: this.styles(),\r\n\t\t};\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst doc = printer.createPdfKitDocument(docDefinition);\r\n\t\t\tconst stream = fs.createWriteStream(this.path);\r\n\r\n\t\t\tdoc.pipe(stream);\r\n\r\n\t\t\tdoc.on(\"end\", () => {\r\n\t\t\t\tresolve(this.path);\r\n\t\t\t});\r\n\r\n\t\t\tdoc.on(\"error\", (err: any) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\r\n\t\t\tdoc.end();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Fonts.\r\n\t *\r\n\t * @returns {Object} font.\r\n\t * @since 1.0.0\r\n\t */\r\n\tfonts(): any {\r\n\t\tconst fonts = {\r\n\t\t\tHelvetica: {\r\n\t\t\t\tnormal: \"Helvetica\",\r\n\t\t\t\tbold: \"Helvetica-Bold\",\r\n\t\t\t\titalics: \"Helvetica-Oblique\",\r\n\t\t\t\tbolditalics: \"Helvetica-BoldOblique\",\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\treturn fonts;\r\n\t}\r\n\r\n\t/**\r\n\t * Doc meta.\r\n\t *\r\n\t * @returns {Object} meta.\r\n\t * @since 1.0.0\r\n\t */\r\n\tmeta(): any {\r\n\t\tconst meta = {\r\n\t\t\ttitle: \"Invoice - #\" + this.invoice.number,\r\n\t\t\tauthor: this.company.name,\r\n\t\t\tsubject: \"Invoice - \" + this.customer.name,\r\n\t\t\tkeywords: \"invoice\",\r\n\t\t};\r\n\r\n\t\treturn meta;\r\n\t}\r\n\r\n\t/**\r\n\t * Default invoice styles.\r\n\t *\r\n\t * @returns {Object} defaults.\r\n\t * @since 1.0.0\r\n\t */\r\n\tdefaultStyle(): any {\r\n\t\tconst defaults = {\r\n\t\t\tfontSize: 10,\r\n\t\t\tlineHeight: 1.8,\r\n\t\t\tbold: false,\r\n\t\t\tfont: \"Helvetica\",\r\n\t\t\tcolor: \"#222222\",\r\n\t\t\tcolumnGap: 30,\r\n\t\t};\r\n\t\treturn defaults;\r\n\t}\r\n\r\n\t/**\r\n\t * Invoice styles.\r\n\t *\r\n\t * @returns {Object} defaults.\r\n\t * @since 1.0.0\r\n\t */\r\n\tstyles(): any {\r\n\t\tconst styles = {\r\n\t\t\th1: {\r\n\t\t\t\tfontSize: 18,\r\n\t\t\t\tbold: true,\r\n\t\t\t},\r\n\t\t\th2: {\r\n\t\t\t\tfontSize: 16,\r\n\t\t\t\tbold: true,\r\n\t\t\t},\r\n\t\t\th3: {\r\n\t\t\t\tfontSize: 14,\r\n\t\t\t\tbold: true,\r\n\t\t\t},\r\n\t\t\ttext: {\r\n\t\t\t\tfontSize: 10,\r\n\t\t\t\tbold: false,\r\n\t\t\t},\r\n\t\t\ttextBold: {\r\n\t\t\t\tfontSize: 10,\r\n\t\t\t\tbold: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\treturn styles;\r\n\t}\r\n\r\n\t/**\r\n\t * Return the invoice layout.\r\n\t *\r\n\t * @returns {Object} layout.\r\n\t * @since 1.0.0\r\n\t */\r\n\tcontent(): any {\r\n\t\tconst sections = [];\r\n\r\n\t\t/**\r\n\t\t * Left: Company section.\r\n\t\t * Right: Invoice section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionCompany = {\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: \"70%\",\r\n\t\t\t\t\tstack: [] as any,\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: \"30%\",\r\n\t\t\t\t\tstack: [] as any,\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tif (this.company.logo) {\r\n\t\t\tif (!this.company.logo.startsWith(\"<svg\")) {\r\n\t\t\t\tthrow new Error(\"Only SVG logo are supported.\");\r\n\t\t\t}\r\n\r\n\t\t\tsectionCompany.columns[0].stack.unshift({\r\n\t\t\t\tsvg: this.company.logo,\r\n\t\t\t\tmargin: [0, 0, 0, 20],\r\n\t\t\t});\r\n\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.name,\r\n\t\t\t\tstyle: \"h3\",\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsectionCompany.columns[0].stack.unshift({\r\n\t\t\t\ttext: this.company.name,\r\n\t\t\t\tstyle: \"h1\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.address) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.address,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.phone) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.phone,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.email) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.email,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.website) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.website,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.taxId) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.taxId,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Invoice information.\r\n\t\tif (this.invoice.label) {\r\n\t\t\tsectionCompany.columns[1].stack.unshift({\r\n\t\t\t\ttext: this.invoice.label,\r\n\t\t\t\tstyle: \"h1\",\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsectionCompany.columns[1].stack.unshift({\r\n\t\t\t\ttext: this.config.string.invoice || \"I N V O I C E\",\r\n\t\t\t\tstyle: \"h1\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst refLabel = this.config.string.refNumber || \"Ref no:\";\r\n\r\n\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\ttext: refLabel + \": #\" + (this.invoice.number || 1),\r\n\t\t\tstyle: \"textBold\",\r\n\t\t});\r\n\r\n\t\tconst dateLabel = this.config.string.date;\r\n\r\n\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\ttext: dateLabel + \": \" + (this.invoice.date || this.date),\r\n\t\t\tstyle: \"text\",\r\n\t\t});\r\n\r\n\t\tconst dueDateLabel = this.config.string.dueDate;\r\n\r\n\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\ttext: dueDateLabel + \": \" + (this.invoice.dueDate || this.date),\r\n\t\t\tstyle: \"text\",\r\n\t\t});\r\n\r\n\t\tconst statusLabel = this.config.string.status;\r\n\r\n\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\ttext: statusLabel + \": \" + (this.invoice.status || \"Pending!\"),\r\n\t\t\tstyle: \"textBold\",\r\n\t\t});\r\n\r\n\t\tsections.push(sectionCompany);\r\n\r\n\t\t/**\r\n\t\t * Left: Bill to section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionCustomer = {\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: 300,\r\n\t\t\t\t\tmargin: [0, 30, 0, 0],\r\n\t\t\t\t\tstack: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttext: this.config.string.billTo,\r\n\t\t\t\t\t\t\tstyle: \"h2\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t] as any,\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tif (this.customer.name) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.name,\r\n\t\t\t\tstyle: \"textBold\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.company) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.company,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.address) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.address,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.phone) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.phone,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.email) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.email,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.taxId) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.taxId,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsections.push(sectionCustomer);\r\n\r\n\t\t/**\r\n\t\t * Full: Items section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionItems = {\r\n\t\t\tmargin: [0, 30, 0, 0],\r\n\t\t\tlineHeight: 1.5,\r\n\t\t\ttable: {\r\n\t\t\t\twidths: [200, 50, \"*\", 50, \"*\"],\r\n\t\t\t\theaderRows: 1,\r\n\t\t\t\tlineHeight: 1.5,\r\n\t\t\t\tbody: [\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t`\\n ${this.config.string.item}`,\r\n\t\t\t\t\t\t`\\n ${this.config.string.quantity}`,\r\n\t\t\t\t\t\t`\\n ${this.config.string.price}`,\r\n\t\t\t\t\t\t`\\n ${this.config.string.tax}`,\r\n\t\t\t\t\t\t`\\n ${this.config.string.total}`,\r\n\t\t\t\t\t],\r\n\t\t\t\t] as any,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tif (this.items.length > 0) {\r\n\t\t\tthis.items.forEach((item) => {\r\n\t\t\t\tconst totalPrice = helper.calcItemTotal(item);\r\n\r\n\t\t\t\tsectionItems.table.body.push([\r\n\t\t\t\t\t`\\n ${item.name}`,\r\n\t\t\t\t\t`\\n ${item.quantity}`,\r\n\t\t\t\t\t`\\n ${this.currency}${item.price}`,\r\n\t\t\t\t\t`\\n ${item.tax || 0}%`,\r\n\t\t\t\t\t`\\n ${this.currency}${totalPrice}`,\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsections.push(sectionItems);\r\n\r\n\t\t/**\r\n\t\t * Right: Total section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionTotal = {\r\n\t\t\tmargin: [0, 20, 0, 0],\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: \"*\",\r\n\t\t\t\t\tstack: [\" \"],\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: 200,\r\n\t\t\t\t\tlineHeight: 1.5,\r\n\t\t\t\t\tstyle: \"textBold\",\r\n\t\t\t\t\ttable: {\r\n\t\t\t\t\t\twidths: [80, \"*\"],\r\n\t\t\t\t\t\theaderRows: 1,\r\n\t\t\t\t\t\tlineHeight: 1.5,\r\n\t\t\t\t\t\tbody: [\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t`\\n ${this.config.string.subTotal}`,\r\n\t\t\t\t\t\t\t\t`\\n ${this.currency}${helper.calcSubTotal(\r\n\t\t\t\t\t\t\t\t\tthis.items\r\n\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t`\\n ${this.config.string.totalTax}`,\r\n\t\t\t\t\t\t\t\t`\\n ${this.currency}${helper.calcTax(\r\n\t\t\t\t\t\t\t\t\tthis.items\r\n\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t`\\n ${this.config.string.total}`,\r\n\t\t\t\t\t\t\t\t`\\n ${this.currency}${helper.calcFinalTotal(\r\n\t\t\t\t\t\t\t\t\tthis.items\r\n\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tsections.push(sectionTotal);\r\n\r\n\t\t/**\r\n\t\t * Left: QR section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tif (this.payload.qr) {\r\n\t\t\tconst sectionQR = {\r\n\t\t\t\tmargin: [0, 50, 0, 0],\r\n\t\t\t\tqr: this.payload.qr.data,\r\n\t\t\t\tfit: this.payload.qr.width || \"50\",\r\n\t\t\t};\r\n\r\n\t\t\tsections.push(sectionQR);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Left: Notes section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tif (this.payload.note) {\r\n\t\t\tconst sectionNote = {\r\n\t\t\t\tmargin: [0, this.payload.qr ? 20 : 50, 0, 0],\r\n\t\t\t\ttext: this.payload.note,\r\n\t\t\t\titalics: true,\r\n\t\t\t};\r\n\r\n\t\t\tsections.push(sectionNote);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Return the invoice sections.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\treturn sections;\r\n\t}\r\n}\r\n"]}