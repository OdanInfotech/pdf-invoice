{"version":3,"sources":["../src/class/invoice.ts"],"names":["fs","pdfmake","PDFInvoice","payload","printer","docDefinition","doc","onSuccess","sections","sectionCompany","sectionCustomer","sectionItems","item","sectionTotal","sectionQR","sectionNote"],"mappings":"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","sourcesContent":["const fs = require(\"fs\");\r\nconst pdfmake = require(\"pdfmake\");\r\n\r\ninterface CompanyInfo {\r\n\tname: string;\r\n\tlogo?: {\r\n\t\tsrc: string;\r\n\t\twidth?: number;\r\n\t};\r\n\taddress?: string;\r\n\tphone?: string;\r\n\temail?: string;\r\n\twebsite?: string;\r\n}\r\n\r\ninterface CustomerInfo {\r\n\tname: string;\r\n\taddress?: string;\r\n\tphone?: string;\r\n\temail?: string;\r\n}\r\n\r\ninterface InvoiceInfo {\r\n\tlabel?: string;\r\n\tnumber: string | number;\r\n\tdate: string;\r\n\tdueDate?: string;\r\n\tstatus: string;\r\n\tcurrency?: string;\r\n}\r\n\r\ninterface ItemInfo {\r\n\tname: string;\r\n\tquantity: number;\r\n\tprice: number;\r\n\ttax?: number;\r\n}\r\n\r\ninterface QRInfo {\r\n\tsrc: string;\r\n\twidth?: number;\r\n}\r\n\r\ninterface Notes {\r\n\ttext: string;\r\n\titalic?: boolean;\r\n}\r\n\r\ninterface InvoicePayLoad {\r\n\tcompany: CompanyInfo;\r\n\tcustomer: CustomerInfo;\r\n\tinvoice: InvoiceInfo;\r\n\titems: ItemInfo[];\r\n\tqr: QRInfo;\r\n\tnote: Notes;\r\n}\r\n\r\ninterface SimplePDFInvoice {\r\n\tcreate(): void;\r\n\tfonts(): void;\r\n\tmeta(): void;\r\n\trender(): void;\r\n}\r\n\r\nexport class PDFInvoice implements SimplePDFInvoice {\r\n\tpayload: InvoicePayLoad;\r\n\tcompany: CompanyInfo;\r\n\tinvoice: InvoiceInfo;\r\n\tcustomer: CustomerInfo;\r\n\titems: ItemInfo[];\r\n\tqr: QRInfo;\r\n\tnote: Notes;\r\n\tdate: string;\r\n\tconstructor(payload: InvoicePayLoad) {\r\n\t\tthis.payload = payload;\r\n\r\n\t\t// Invoice sections.\r\n\t\tthis.company = payload.company;\r\n\t\tthis.customer = payload.customer;\r\n\t\tthis.invoice = payload.invoice;\r\n\t\tthis.items = payload.items;\r\n\t\tthis.qr = payload.qr;\r\n\t\tthis.note = payload.note;\r\n\r\n\t\t// Invoice information.\r\n\t\tthis.date = new Date().toLocaleDateString(\"en-US\", {\r\n\t\t\tyear: \"numeric\",\r\n\t\t\tmonth: \"numeric\",\r\n\t\t\tday: \"numeric\",\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Create a PDF invoice.\r\n\t *\r\n\t * @returns {void}\r\n\t * @since 1.0.0\r\n\t */\r\n\tcreate() {\r\n\t\tconst printer = new pdfmake(this.fonts());\r\n\r\n\t\tconst docDefinition = {\r\n\t\t\tpageSize: \"A4\",\r\n\t\t\torientation: \"portrait\",\r\n\t\t\tpageMargins: [40, 40, 40, 40],\r\n\t\t\tinfo: this.meta(),\r\n\t\t\tcontent: this.render(),\r\n\t\t\tdefaultStyle: {\r\n\t\t\t\tfontSize: 10,\r\n\t\t\t\tlineHeight: 1.8,\r\n\t\t\t\tbold: false,\r\n\t\t\t\tfont: \"Helvetica\",\r\n\t\t\t\tcolor: \"#222222\",\r\n\t\t\t\tcolumnGap: 30,\r\n\t\t\t},\r\n\t\t\tstyles: {\r\n\t\t\t\th1: {\r\n\t\t\t\t\tfontSize: 18,\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t},\r\n\t\t\t\th2: {\r\n\t\t\t\t\tfontSize: 16,\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t},\r\n\t\t\t\th3: {\r\n\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t},\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tfontSize: 10,\r\n\t\t\t\t\tbold: false,\r\n\t\t\t\t},\r\n\t\t\t\ttextBold: {\r\n\t\t\t\t\tfontSize: 10,\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst doc = printer.createPdfKitDocument(docDefinition);\r\n\r\n\t\tdoc.pipe(fs.createWriteStream(\"./invoice.pdf\"));\r\n\r\n\t\tconst onSuccess = () => {\r\n\t\t\treturn \"invoice.pdf\";\r\n\t\t};\r\n\r\n\t\t//doc.on(\"finish\", function () {\r\n\t\t//\treturn true;\r\n\t\t//});\r\n\r\n\t\tdoc.end();\r\n\t}\r\n\r\n\t/**\r\n\t * Render company information.\r\n\t *\r\n\t * @returns {Object} font.\r\n\t * @since 1.0.0\r\n\t */\r\n\tfonts() {\r\n\t\tconst fonts = {\r\n\t\t\tHelvetica: {\r\n\t\t\t\tnormal: \"Helvetica\",\r\n\t\t\t\tbold: \"Helvetica-Bold\",\r\n\t\t\t\titalics: \"Helvetica-Oblique\",\r\n\t\t\t\tbolditalics: \"Helvetica-BoldOblique\",\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\treturn fonts;\r\n\t}\r\n\r\n\t/**\r\n\t * Render doc meta.\r\n\t *\r\n\t * @returns {Object} meta.\r\n\t * @since 1.0.0\r\n\t */\r\n\tmeta() {\r\n\t\tconst meta = {\r\n\t\t\ttitle: \"Invoice - #\" + this.invoice.number,\r\n\t\t\tauthor: this.company.name,\r\n\t\t\tsubject: \"Invoice - \" + this.customer.name,\r\n\t\t\tkeywords: \"invoice\",\r\n\t\t};\r\n\r\n\t\treturn meta;\r\n\t}\r\n\r\n\t/**\r\n\t * Return the invoice layout.\r\n\t *\r\n\t * @returns {Object} layout.\r\n\t * @since 1.0.0\r\n\t */\r\n\trender() {\r\n\t\tconst sections = [];\r\n\r\n\t\t/**\r\n\t\t * Left: Company section.\r\n\t\t * Right: Invoice section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionCompany = {\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: \"70%\",\r\n\t\t\t\t\tstack: [] as any,\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: \"30%\",\r\n\t\t\t\t\tstack: [] as any,\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\t//if (this.company.logo) {\r\n\t\t//\t// Check if file exists.\r\n\t\t//\tif (fs.existsSync(this.company.logo.src)) {\r\n\t\t//\t\tsectionCompany.columns[0].stack.unshift({\r\n\t\t//\t\t\timage: this.company.logo.src,\r\n\t\t//\t\t\twidth: this.company.logo.width || 90,\r\n\t\t//\t\t\talignment: \"left\",\r\n\t\t//\t\t\tmargin: [0, 0, 0, 20],\r\n\t\t//\t\t});\r\n\t\t//\t}\r\n\t\t//}\r\n\r\n\t\tif (this.company.name) {\r\n\t\t\tsectionCompany.columns[0].stack.unshift({\r\n\t\t\t\ttext: this.company.name,\r\n\t\t\t\tstyle: this.company.logo ? \"h2\" : \"h1\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.address) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.address,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.phone) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.phone,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.email) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.email,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.company.website) {\r\n\t\t\tsectionCompany.columns[0].stack.push({\r\n\t\t\t\ttext: this.company.website,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Invoice information.\r\n\t\tif (this.invoice.label) {\r\n\t\t\tsectionCompany.columns[1].stack.unshift({\r\n\t\t\t\ttext: this.invoice.label,\r\n\t\t\t\tstyle: \"h1\",\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsectionCompany.columns[1].stack.unshift({\r\n\t\t\t\ttext: \"I N V O I C E\",\r\n\t\t\t\tstyle: \"h1\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.invoice.number) {\r\n\t\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\t\ttext: `Ref no: #${this.invoice.number || 1}`,\r\n\t\t\t\tstyle: \"textBold\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.invoice.date) {\r\n\t\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\t\ttext: `Date: ${this.invoice.date || this.date}`,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.invoice.dueDate) {\r\n\t\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\t\ttext: `Due Date: ${this.invoice.dueDate || this.date}`,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.invoice.status) {\r\n\t\t\tsectionCompany.columns[1].stack.push({\r\n\t\t\t\ttext: `Status: ${this.invoice.status || \"Due to pay!\"}`,\r\n\t\t\t\tstyle: \"textBold\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsections.push(sectionCompany);\r\n\r\n\t\t/**\r\n\t\t * Left: Bill to section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionCustomer = {\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: 300,\r\n\t\t\t\t\tmargin: [0, 30, 0, 0],\r\n\t\t\t\t\tstack: [{ text: \"Bill To:\", style: \"h2\" }] as any,\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tif (this.customer.name) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.name,\r\n\t\t\t\tstyle: \"textBold\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.address) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.address,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.phone) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.phone,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.customer.email) {\r\n\t\t\tsectionCustomer.columns[0].stack.push({\r\n\t\t\t\ttext: this.customer.email,\r\n\t\t\t\tstyle: \"text\",\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsections.push(sectionCustomer);\r\n\r\n\t\t/**\r\n\t\t * Full: Items section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionItems = {\r\n\t\t\tmargin: [0, 30, 0, 0],\r\n\t\t\t//layout: \"lightHorizontalLines\",\r\n\t\t\tlineHeight: 1.5,\r\n\t\t\ttable: {\r\n\t\t\t\twidths: [200, 50, \"*\", 50, \"*\"],\r\n\t\t\t\theaderRows: 1,\r\n\t\t\t\tlineHeight: 1.5,\r\n\t\t\t\tbody: [\r\n\t\t\t\t\t[\"\\n Item\", \"\\n Qty\", \"\\n Price\", \"\\n TAX\", \"\\n Total\"],\r\n\t\t\t\t] as any,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tif (this.items.length > 0) {\r\n\t\t\tthis.items.forEach((item) => {\r\n\t\t\t\tsectionItems.table.body.push([\r\n\t\t\t\t\t`\\n ${item.name}`,\r\n\t\t\t\t\t`\\n ${item.quantity}`,\r\n\t\t\t\t\t`\\n ${this.invoice.currency || \"$\"}${item.price}`,\r\n\t\t\t\t\t`\\n ${item.tax || 0}%`,\r\n\t\t\t\t\t`\\n ${this.invoice.currency || \"$\"}${\r\n\t\t\t\t\t\titem.quantity * item.price\r\n\t\t\t\t\t}`,\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsections.push(sectionItems);\r\n\r\n\t\t/**\r\n\t\t * Right: Total section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tconst sectionTotal = {\r\n\t\t\tmargin: [0, 20, 0, 0],\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: \"*\",\r\n\t\t\t\t\tstack: [\" \"],\r\n\t\t\t\t\tstyle: \"text\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: 200,\r\n\t\t\t\t\tlineHeight: 1.5,\r\n\t\t\t\t\tstyle: \"textBold\",\r\n\t\t\t\t\ttable: {\r\n\t\t\t\t\t\twidths: [100, \"*\"],\r\n\t\t\t\t\t\theaderRows: 1,\r\n\t\t\t\t\t\tlineHeight: 1.5,\r\n\t\t\t\t\t\tbody: [\r\n\t\t\t\t\t\t\t[\"\\n Sub total:\", \"\\n £814\"],\r\n\t\t\t\t\t\t\t[\"\\n Total tax:\", \"\\n £0\"],\r\n\t\t\t\t\t\t\t[\"\\n Total:\", \"\\n £814\"],\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\tsections.push(sectionTotal);\r\n\r\n\t\t/**\r\n\t\t * Left: QR section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tif (this.payload.qr) {\r\n\t\t\tconst sectionQR = {\r\n\t\t\t\tmargin: [0, 100, 0, 0],\r\n\t\t\t\tqr: this.payload.qr.src,\r\n\t\t\t\tfit: this.payload.qr.width || \"50\",\r\n\t\t\t};\r\n\r\n\t\t\tsections.push(sectionQR);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Left: Notes section.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\tif (this.payload.note) {\r\n\t\t\tconst sectionNote = {\r\n\t\t\t\tmargin: [0, this.payload.qr ? 20 : 100, 0, 0],\r\n\t\t\t\ttext: this.payload.note.text,\r\n\t\t\t\titalics: this.payload.note.italic || true,\r\n\t\t\t};\r\n\r\n\t\t\tsections.push(sectionNote);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Return the invoice sections.\r\n\t\t *\r\n\t\t * @since 1.0.0\r\n\t\t */\r\n\t\treturn sections;\r\n\t}\r\n}\r\n"]}